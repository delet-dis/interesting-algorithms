"use strict";(self["webpackChunkinteresting_algorithms"]=self["webpackChunkinteresting_algorithms"]||[]).push([[622],{2725:function(t,e,n){n.r(e),n.d(e,{default:function(){return mt}});var i=n(3396),a=n(7139),r=function(t){return(0,i.dD)("data-v-37793bbf"),t=t(),(0,i.Cn)(),t},s={class:"container",id:"container"},o={class:"row"},l={class:"col-lg-3 col-md-12"},u=r((function(){return(0,i._)("h1",null," Я знаю точно – невозможное возможно ",-1)})),c=r((function(){return(0,i._)("p",null," Количество точек меньше количества кластеров ",-1)})),d={class:"col-lg-6 col-md-12"},h={class:"clusterCanvas",id:"clusterCanvas",ref:"clusterCanvas"},v={class:"col-lg-3 col-md-12"},f=r((function(){return(0,i._)("h1",null," Конфигуратор алгоритма ",-1)})),y=r((function(){return(0,i._)("p",null," Количество кластеров ",-1)})),C=r((function(){return(0,i._)("div",{class:"separator"},null,-1)})),p=r((function(){return(0,i._)("p",null," Действия с точками ",-1)})),k=r((function(){return(0,i._)("button",{class:"button button-border button-rounded button-action",id:"addDotButton"}," Добавить точки ",-1)})),D=r((function(){return(0,i._)("div",{class:"spacer"},null,-1)})),m=r((function(){return(0,i._)("button",{class:"button button-border button-rounded button-caution",id:"removeDotButton"}," Удалить точки ",-1)})),g=r((function(){return(0,i._)("div",{class:"separator"},null,-1)})),b=r((function(){return(0,i._)("p",null," Тип кластеризации ",-1)})),x=r((function(){return(0,i._)("button",{class:"button button-border button-rounded button-royal",id:"kMeansButton"}," К-Средних ",-1)})),Z=r((function(){return(0,i._)("div",{class:"spacer"},null,-1)})),N=r((function(){return(0,i._)("button",{class:"button button-border button-rounded button-royal",id:"hierarchyButton"}," Иерархический ",-1)})),B=r((function(){return(0,i._)("div",{class:"spacer"},null,-1)})),I=r((function(){return(0,i._)("button",{class:"button button-border button-rounded button-primary button-glow",id:"comparisonButton"}," Сравнение алгоритмов ",-1)}));function M(t,e,n,r,M,w){var O=(0,i.up)("ClusteringDescription"),_=(0,i.up)("Card"),A=(0,i.up)("Error"),E=(0,i.up)("vue-slider");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",o,[(0,i._)("div",l,[(0,i.Wm)(_,{class:"descriptionCard"},{default:(0,i.w5)((function(){return[(0,i.Wm)(O)]})),_:1}),(0,i.Wm)(A,{id:"error",class:(0,a.C_)({"error-displaying":t.isErrorDisplaying})},{default:(0,i.w5)((function(){return[u,c]})),_:1},8,["class"])]),(0,i._)("div",d,[(0,i.Wm)(_,{class:"cardCenter clusteringCard",id:"clusteringCard"},{default:(0,i.w5)((function(){return[(0,i._)("canvas",h,null,512)]})),_:1})]),(0,i._)("div",v,[(0,i.Wm)(_,null,{default:(0,i.w5)((function(){return[f,y,(0,i.Wm)(E,{modelValue:t.numberOfClusters,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.numberOfClusters=e}),dotSize:20,max:10,min:2,silent:!0},null,8,["modelValue"]),C,p,k,D,m,g,b,x,Z,N,B,I]})),_:1})])])])}var w=n(3087),O=n(2833),_=n(2417),A=n(3806),E=n(5744),S=n(2482),T=n(3336),L=(n(5003),n(1539),n(1299),n(2222),n(561),n(4747),n(6520)),z=n(9434),R=n(7439),F=(0,i._)("h1",null," Алгоритм кластеризации ",-1),P=(0,i._)("h3",null," Бонусная реализация ",-1),X=(0,i._)("p",null," Алгоритм для разбиения точек на кластеры ",-1);function W(t,e,n,a,r,s){return(0,i.wg)(),(0,i.iD)(i.HY,null,[F,P,X],64)}var Y=function(t,e,n,i){var a,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"===typeof Reflect?"undefined":(0,T.Z)(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(r<3?a(s):r>3?a(e,n,s):a(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},V=function(t){(0,A.Z)(n,t);var e=(0,E.Z)(n);function n(){return(0,w.Z)(this,n),e.apply(this,arguments)}return(0,O.Z)(n)}(L.w3);V=Y([(0,L.Ei)({components:{}})],V);var G=V,j=n(89);const q=(0,j.Z)(G,[["render",W]]);var H=q,U=n(8303),K=n.n(U),J=(0,O.Z)((function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,w.Z)(this,t),(0,S.Z)(this,"xCoordinate",void 0),(0,S.Z)(this,"yCoordinate",void 0),(0,S.Z)(this,"kMeansIndex",void 0),(0,S.Z)(this,"hierarchyIndex",void 0),this.xCoordinate=e,this.yCoordinate=n,this.kMeansIndex=i,this.hierarchyIndex=a})),Q=J,$=(n(9653),function(){function t(){(0,w.Z)(this,t),(0,S.Z)(this,"currentX",-1),(0,S.Z)(this,"currentY",-1),(0,S.Z)(this,"dots",[]),(0,S.Z)(this,"lastX",-1),(0,S.Z)(this,"lastY",-1)}return(0,O.Z)(t,[{key:"setCenter",value:function(){var t=0,e=0;this.dots.forEach((function(n){t+=n.xCoordinate,e+=n.yCoordinate})),this.lastX=this.currentX,this.lastY=this.currentY,this.currentX=t/this.dots.length,this.currentY=e/this.dots.length}}]),t}()),tt=$,et=function(){function t(){(0,w.Z)(this,t),(0,S.Z)(this,"clusters",[])}return(0,O.Z)(t,[{key:"identifyCenters",value:function(t,e){for(var n=e.length,i=n/t,a=0,r=0;r<t;r++,a+=i)this.clusters[r].currentX=e[Math.floor(a)].xCoordinate,this.clusters[r].currentY=e[Math.floor(a)].yCoordinate}},{key:"bind",value:function(t,e){for(var n=0;n<e;n++)this.clusters[n].dots=[];for(var i=0;i<t.length;i++){for(var a=Number.MAX_VALUE,r=-1,s=0;s<this.clusters.length;s++){var o=Math.sqrt(Math.pow(t[i].xCoordinate-this.clusters[s].currentX,2)+Math.pow(t[i].yCoordinate-this.clusters[s].currentY,2));o<a&&(a=o,t[i].kMeansIndex=s,r=s)}this.clusters[r].dots.push(t[i])}return t}},{key:"splitByClusters",value:function(t,e){this.clusters=[];for(var n=0;n<e;n++)this.clusters[n]=new tt;this.identifyCenters(e,t);var i=0;while(i!=e){i=0,t=this.bind(t,e);for(var a=0;a<this.clusters.length;a++)this.clusters[a].setCenter();for(var r=0;r<e;r++)this.clusters[r].currentX==this.clusters[r].lastX&&this.clusters[r].currentY==this.clusters[r].lastY&&i++}return t}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),t}();(0,S.Z)(et,"instance",void 0);var nt,it=et;(function(t){t[t["DOTS_ADDING"]=0]="DOTS_ADDING",t[t["DOTS_REMOVING"]=1]="DOTS_REMOVING"})(nt||(nt={}));var at,rt=nt,st=n(6347),ot=(n(2165),n(8783),n(3948),n(2526),n(1817),(0,O.Z)((function t(e,n,i){(0,w.Z)(this,t),(0,S.Z)(this,"data",void 0),(0,S.Z)(this,"prevNode",void 0),(0,S.Z)(this,"nextNode",void 0),this.data=e,this.prevNode=n,this.nextNode=i})));at=Symbol.iterator;var lt=function(){function t(){(0,w.Z)(this,t),(0,S.Z)(this,"frontNode",null),(0,S.Z)(this,"backNode",null),(0,S.Z)(this,"iteratorStartNode",null),(0,S.Z)(this,"size",0);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var a=0,r=n;a<r.length;a++){var s=r[a];this.pushBack(s)}}return(0,O.Z)(t,[{key:"pushBack",value:function(t){null===this.backNode?(this.backNode=new ot(t,null,null),this.frontNode=this.backNode,this.iteratorStartNode=this.frontNode):(this.backNode.nextNode=new ot(t,this.backNode,null),this.backNode=this.backNode.nextNode),this.size++}},{key:"remove",value:function(t){var e=!0;t===this.backNode&&(t.prevNode&&(t.prevNode.nextNode=null),this.backNode=t.prevNode,e=!1),t===this.frontNode?(t.nextNode&&(t.nextNode.prevNode=null),this.frontNode=t.nextNode,this.iteratorStartNode=this.frontNode):e&&(t.prevNode.nextNode=t.nextNode,t.nextNode.prevNode=t.prevNode),this.size--}},{key:"concatenate",value:function(t){this.size&&t.size&&(this.backNode.nextNode=t.frontNode,t.frontNode.prevNode=this.backNode,this.backNode=t.backNode,this.size+=t.size)}},{key:at,value:function(){var t=this.iteratorStartNode;return this.iteratorStartNode=this.frontNode,{next:function(){var e=t;return e&&(t=t.nextNode),{done:null===e,value:e}}}}}]),t}(),ut=lt,ct=(0,O.Z)((function t(e,n,i,a){(0,w.Z)(this,t),(0,S.Z)(this,"points",void 0),(0,S.Z)(this,"closest",void 0),(0,S.Z)(this,"minimalDistance",void 0),(0,S.Z)(this,"distCol",void 0),this.points=e,this.closest=n,this.minimalDistance=i,this.distCol=a})),dt=ct,ht=function(){function t(){(0,w.Z)(this,t)}return(0,O.Z)(t,[{key:"splitByClusters",value:function(t,e){for(var n=new ut,i=0;i<t.length;i++)n.pushBack(new dt(new ut(t[i]),null,99999,i));for(var a=Array(t.length),r=0;r<t.length;r++)a[r]=Array(t.length);var s,o,l=9999,u=0,c=(0,st.Z)(n);try{for(c.s();!(o=c.n()).done;){var d=o.value;n.iteratorStartNode=d.nextNode;var h,v=u+1,f=(0,st.Z)(n);try{for(f.s();!(h=f.n()).done;){var y=h.value,C=Math.sqrt(Math.pow(t[u].xCoordinate-t[v].xCoordinate,2)+Math.pow(t[u].yCoordinate-t[v].yCoordinate,2));a[u][v]=C,a[v][u]=C,C<d.data.minimalDistance&&(d.data.minimalDistance=C,d.data.closest=y,C<l&&(l=C,s=d)),C<y.data.minimalDistance&&(y.data.minimalDistance=C,y.data.closest=d),v++}}catch(A){f.e(A)}finally{f.f()}u++}}catch(A){c.e(A)}finally{c.f()}while(n.size!=e){s.data.points.concatenate(s.data.closest.data.points),s.data.minimalDistance=Number.MAX_VALUE,l=Number.MAX_VALUE;var p=s,k=s.data.distCol,D=s.data.closest.data.distCol;n.remove(s.data.closest);var m,g=(0,st.Z)(n);try{for(g.s();!(m=g.n()).done;){var b=m.value;if(b!==p){var x=b.data.distCol,Z=Math.min(a[k][x],a[D][x]);a[k][x]=Z,a[x][k]=Z,Z<p.data.minimalDistance&&(p.data.minimalDistance=Z,p.data.closest=b),Z<=b.data.minimalDistance&&(b.data.minimalDistance=Z,b.data.closest=p),b.data.minimalDistance<l&&(l=b.data.minimalDistance,s=b)}}}catch(A){g.e(A)}finally{g.f()}}var N,B=0,I=(0,st.Z)(n);try{for(I.s();!(N=I.n()).done;){var M,w=N.value,O=(0,st.Z)(w.data.points);try{for(O.s();!(M=O.n()).done;){var _=M.value;_.data.hierarchyIndex=B}}catch(A){O.e(A)}finally{O.f()}B++}}catch(A){I.e(A)}finally{I.f()}return t}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),t}();(0,S.Z)(ht,"instance",void 0);var vt,ft=ht,yt=n(4258),Ct=function(t,e,n,i){var a,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"===typeof Reflect?"undefined":(0,T.Z)(Reflect))&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(r<3?a(s):r>3?a(e,n,s):a(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},pt=vt=function(t){(0,A.Z)(n,t);var e=(0,E.Z)(n);function n(){var t;(0,w.Z)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a)),(0,S.Z)((0,_.Z)(t),"meta",(0,L.cY)((function(){return(0,R.jq)({title:"📦",htmlAttrs:{lang:"ru",amp:!0}})}))),(0,S.Z)((0,_.Z)(t),"dotsToDisplayField",[]),(0,S.Z)((0,_.Z)(t),"numberOfClustersField",6),(0,S.Z)((0,_.Z)(t),"canvas",null),(0,S.Z)((0,_.Z)(t),"canvasContext",null),(0,S.Z)((0,_.Z)(t),"clusteringDisplayState",null),(0,S.Z)((0,_.Z)(t),"isErrorDisplaying",!1),(0,S.Z)((0,_.Z)(t),"kMeansColorsArray",null),(0,S.Z)((0,_.Z)(t),"hierarchyColorsArray",null),(0,S.Z)((0,_.Z)(t),"canvasClickListener",(function(e){var n=e.target.getBoundingClientRect();switch(t.clusteringDisplayState){case rt.DOTS_ADDING:if(n){t.clearDots();for(var i=new Q(e.clientX-n.left,e.clientY-n.top),a=!0,r=0;r<t.dotsToDisplay.length;r++){var s=t.dotsToDisplay[r];if(vt.areDotsNearby(i,s)){a=!1;break}}if(a){var o=t.dotsToDisplay;o.push(i),t.dotsToDisplay=o}}break;case rt.DOTS_REMOVING:if(n){t.clearDots();for(var l=new Q(e.clientX-n.left,e.clientY-n.top),u=0;u<t.dotsToDisplay.length;u++){var c=t.dotsToDisplay[u];if(vt.areDotsNearby(l,c)){var d=t.dotsToDisplay;d.splice(u,1),t.dotsToDisplay=d;break}}}break}})),t}return(0,O.Z)(n,[{key:"dotsToDisplay",get:function(){return this.dotsToDisplayField},set:function(t){this.dotsToDisplayField=t,this.drawDots()}},{key:"numberOfClusters",get:function(){return this.numberOfClustersField},set:function(t){this.numberOfClustersField=t}},{key:"initCanvasOnClickListener",value:function(){var t;null===(t=this.canvas)||void 0===t||t.addEventListener("click",this.canvasClickListener)}},{key:"removeCanvasClickListener",value:function(){var t;null===(t=this.canvas)||void 0===t||t.removeEventListener("click",this.canvasClickListener)}},{key:"initCanvas",value:function(){this.canvas=document.getElementById("clusterCanvas"),this.canvasContext=this.canvas.getContext("2d"),this.updateCanvasSize()}},{key:"initCardWidthListener",value:function(){var t,e=this,n=document.getElementById("clusteringCard");vt.updateCardSize(n),this.updateCanvasSize(),null===(t=window)||void 0===t||t.addEventListener("resize",(function(){vt.updateCardSize(n),e.updateCanvasSize()}))}},{key:"initAddDotButtonOnClickListener",value:function(){var t=this,e=document.getElementById("addDotButton");null===e||void 0===e||e.addEventListener("click",(function(){t.clusteringDisplayState=rt.DOTS_ADDING}))}},{key:"initRemoveDotButtonOnClickListener",value:function(){var t=this,e=document.getElementById("removeDotButton");null===e||void 0===e||e.addEventListener("click",(function(){t.clusteringDisplayState=rt.DOTS_REMOVING}))}},{key:"initKMeansButtonOnClickListener",value:function(){var t=this,e=document.getElementById("kMeansButton");null===e||void 0===e||e.addEventListener("click",(function(){t.numberOfClusters<=t.dotsToDisplay.length?(t.isErrorDisplaying=!1,t.clearDots(),t.clusteringDisplayState=null,t.dotsToDisplay=it.getInstance().splitByClusters(t.dotsToDisplay,t.numberOfClusters)):t.isErrorDisplaying=!0}))}},{key:"initHierarchyButtonOnClickListener",value:function(){var t=this,e=document.getElementById("hierarchyButton");null===e||void 0===e||e.addEventListener("click",(function(){t.numberOfClusters<=t.dotsToDisplay.length?(t.isErrorDisplaying=!1,t.clearDots(),t.clusteringDisplayState=null,t.dotsToDisplay=ft.getInstance().splitByClusters(t.dotsToDisplay,t.numberOfClusters)):t.isErrorDisplaying=!0}))}},{key:"initComparisonButtonOnClickListener",value:function(){var t=this,e=document.getElementById("comparisonButton");null===e||void 0===e||e.addEventListener("click",(function(){t.numberOfClusters<=t.dotsToDisplay.length?(t.isErrorDisplaying=!1,t.clearDots(),t.clusteringDisplayState=null,t.dotsToDisplay=ft.getInstance().splitByClusters(t.dotsToDisplay,t.numberOfClusters),t.dotsToDisplay=it.getInstance().splitByClusters(t.dotsToDisplay,t.numberOfClusters)):t.isErrorDisplaying=!0}))}},{key:"initContainerWidthListener",value:function(){var t=this;new ResizeObserver((function(){return t.updateCanvasSize()})).observe(document.getElementById("container"))}},{key:"initColorsArrays",value:function(){this.kMeansColorsArray=["#ADA8F1","#474555","#ACA9BB","#F69591","#BB615F","#574240","#BFA5A3","#71823B","#3F510A","#E5DBCE"],this.hierarchyColorsArray=["#514438","#ED992A","#0090B4","#B8A89A","#00C77F","#00ABBB","#00C77F","#00C9DD","#BEFCFF","#458084"]}},{key:"updateCanvasSize",value:function(){var t=document.getElementById("clusteringCard");if(t&&this.canvas){var e=t.offsetWidth-30,n=t.offsetHeight-40;this.canvas.width=e,this.canvas.height=n,this.canvas.style.width=e+"px",this.canvas.style.height=n+"px"}this.drawDots()}},{key:"drawDots",value:function(){var t,e,n,i=this;this.canvas&&(null===(t=this.canvasContext)||void 0===t||t.clearRect(0,0,this.canvas.width,this.canvas.height),null===(e=this.canvasContext)||void 0===e||e.beginPath(),null===(n=this.canvasContext)||void 0===n||n.closePath());this.dotsToDisplay.forEach((function(t){i.canvasContext&&(i.canvasContext.moveTo(t.xCoordinate,t.yCoordinate),i.canvasContext.beginPath(),i.canvasContext.lineWidth=20,null!=t.hierarchyIndex&&null!=t.kMeansIndex&&(i.canvasContext.arc(t.xCoordinate,t.yCoordinate,10,-Math.PI/2,Math.PI/2),i.hierarchyColorsArray&&(i.canvasContext.strokeStyle=i.hierarchyColorsArray[t.hierarchyIndex],i.canvasContext.stroke()),i.canvasContext.beginPath(),i.canvasContext.arc(t.xCoordinate,t.yCoordinate,10,Math.PI/2,-Math.PI/2),i.kMeansColorsArray&&(i.canvasContext.strokeStyle=i.kMeansColorsArray[t.kMeansIndex],i.canvasContext.stroke())),null!=t.hierarchyIndex&&null==t.kMeansIndex&&(i.canvasContext.arc(t.xCoordinate,t.yCoordinate,10,0,2*Math.PI),i.hierarchyColorsArray&&(i.canvasContext.strokeStyle=i.hierarchyColorsArray[t.hierarchyIndex]),i.canvasContext.stroke()),null!=t.kMeansIndex&&null==t.hierarchyIndex&&(i.canvasContext.arc(t.xCoordinate,t.yCoordinate,10,0,2*Math.PI),i.kMeansColorsArray&&(i.canvasContext.strokeStyle=i.kMeansColorsArray[t.kMeansIndex]),i.canvasContext.stroke()),null==t.kMeansIndex&&null==t.hierarchyIndex&&(i.canvasContext.arc(t.xCoordinate,t.yCoordinate,10,0,2*Math.PI),i.canvasContext.strokeStyle="#000000",i.canvasContext.stroke()))}))}},{key:"clearDots",value:function(){for(var t=0;t<this.dotsToDisplay.length;t++)this.dotsToDisplay[t].hierarchyIndex=null,this.dotsToDisplay[t].kMeansIndex=null}},{key:"mounted",value:function(){this.initContainerWidthListener(),this.initColorsArrays(),this.initCanvas(),this.initCardWidthListener(),this.initAddDotButtonOnClickListener(),this.initRemoveDotButtonOnClickListener(),this.initKMeansButtonOnClickListener(),this.initHierarchyButtonOnClickListener(),this.initComparisonButtonOnClickListener(),this.initCanvasOnClickListener()}}],[{key:"areDotsNearby",value:function(t,e){var n=Math.sqrt(Math.pow(t.xCoordinate-e.xCoordinate,2))+Math.sqrt(Math.pow(t.yCoordinate-e.yCoordinate,2))-25;return n<=25}},{key:"updateCardSize",value:function(t){t&&(t.style.height=t.clientWidth+"px")}}]),n}(L.w3);pt=vt=Ct([(0,L.Ei)({components:{Error:yt.Z,ClusteringDescription:H,Card:z.Z,VueSlider:K()}})],pt);var kt=pt;const Dt=(0,j.Z)(kt,[["render",M],["__scopeId","data-v-37793bbf"]]);var mt=Dt}}]);
//# sourceMappingURL=622-legacy.b839b6cb.js.map